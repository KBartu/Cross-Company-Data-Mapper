services:
  mapping-service:
    build: ./mapping-service
    container_name: mapping-service
    ports:
      - "8001:8001"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - OPENAI_MODEL=gpt-4.1-mini
      - PORT=8001
    volumes:
      - ./mapping-service:/app
    networks:
      - mapper-net

  validation-service:
    build: ./validation-service
    container_name: validation-service
    ports:
      - "8002:8002"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - OPENAI_MODEL=gpt-4.1-mini
      - PORT=8002
    volumes:
      - ./validation-service:/app
    networks:
      - mapper-net

  frontend:
    build: ./frontend
    container_name: frontend
    ports:
      - "5173:5173"
    environment:
      - VITE_MAPPING_API=http://mapping-service:8001
      - VITE_VALIDATION_API=http://validation-service:8002
    networks:
      - mapper-net

networks:
  mapper-net:
    driver: bridge
